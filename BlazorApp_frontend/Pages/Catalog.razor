@page "/catalog"
@using HttpModels
@using System.Net.Http.Json
@using static System.Net.Http.HttpMessageInvoker

@inject IClock _clock
@inject ICatalog _catalog

<h3>Catalog</h3>

@code {
    private readonly HttpClient _client = new HttpClient();
    private List<Product> _products;
    private string requestUri = "https://localhost:7168/products";
    private string message = "";
    
    protected override async Task OnInitializedAsync()
    {
        //HttpResponseMessage response = await _client.GetAsync(requestUri);
        //response.EnsureSuccessStatusCode()
        {
        _products = await response.Content.ReadFromJsonAsync<List<Product>>();
        message = "";
        }
        //else
        message = $"{requestUri} не доступен!";
               
    }

}
<div>@message</div>
<ul>
    @foreach (var @category in _products.GroupBy(x => x.CategoryId))
    {
        <li>
            <ul><div style="font-size: 40px;">@category.Key</div>
                @foreach (var product in category)
                {
                    <li><a href="/ProductInfo/@product.Id"><img src="@product.Image" width="100" height="100"/></a><div>@product.Name :: @product.Price</div></li> 
                }
            </ul>
            </li>
    }
</ul>